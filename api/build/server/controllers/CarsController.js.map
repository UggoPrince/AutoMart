{"version":3,"sources":["../../../server/controllers/CarsController.js"],"names":["CarsController","req","res","reqBody","body","car_photo","files","Cars","postAdvert","result","status","send","data","rows","car_id","params","updateStatus","updatePrice","getCarById","rQuery","query","qLength","getAllCars","getCarsByStatusAvailable","owner","getCarByOwner","token","id","state","getCarsByStatusAndState","manufacturer","getCarsByStatusAndManufacturer","getCarsByStatusAndPriceRange","min_price","max_price","deleteAdvert"],"mappings":"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","sourcesContent":["/* eslint-disable linebreak-style */\r\n/* eslint-disable class-methods-use-this */\r\n/* eslint-disable camelcase */\r\n\r\nimport Cars from '../models/Cars';\r\n\r\nclass CarsController {\r\n  async addCar(req, res) {\r\n    const reqBody = req.body;\r\n    const car_photo = req.files;\r\n\r\n    const result = await Cars.postAdvert(reqBody, car_photo);\r\n    res.status(201).send({\r\n      status: 201,\r\n      data: result.rows[0],\r\n    });\r\n  }\r\n\r\n  async updateCarStatus(req, res) {\r\n    const reqBody = req.body;\r\n    reqBody.car_id = req.params.car_id;\r\n    const result = await Cars.updateStatus(reqBody);\r\n    res.status(200).send({\r\n      status: 200,\r\n      data: result.rows[0],\r\n    });\r\n  }\r\n\r\n  async updateCarPrice(req, res) {\r\n    const reqBody = req.body;\r\n    reqBody.car_id = req.params.car_id;\r\n    const result = await Cars.updatePrice(reqBody);\r\n    res.status(200).send({\r\n      status: 200,\r\n      data: result.rows[0],\r\n    });\r\n  }\r\n\r\n  async getSpecificCar(req, res) {\r\n    const { car_id } = req.params;\r\n    const result = await Cars.getCarById(car_id);\r\n    res.status(200).send({\r\n      status: 200,\r\n      data: result.rows[0],\r\n    });\r\n  }\r\n\r\n  async getCars(req, res) {\r\n    const rQuery = req.query;\r\n    if (req.qLength === 0) {\r\n      const result = await Cars.getAllCars();\r\n      res.status(200).send({\r\n        status: 200,\r\n        data: result.rows,\r\n      });\r\n    } else if (req.qLength === 1 && rQuery.status) {\r\n      const result = await Cars.getCarsByStatusAvailable();\r\n      res.status(200).send({\r\n        status: 200,\r\n        data: result.rows,\r\n      });\r\n    } else if (req.qLength === 1 && rQuery.owner) {\r\n      const result = await Cars.getCarByOwner(req.token.id);\r\n      res.status(200).send({\r\n        status: 200,\r\n        data: result.rows,\r\n      });\r\n    } else if (req.qLength === 2) {\r\n      let result = '';\r\n      if (rQuery.state) { result = await Cars.getCarsByStatusAndState('state', rQuery.state); }\r\n      if (rQuery.manufacturer) {\r\n        result = await Cars.getCarsByStatusAndManufacturer('manufacturer', rQuery.manufacturer);\r\n      }\r\n      res.status(200).send({\r\n        status: 200,\r\n        data: result.rows,\r\n      });\r\n    } else if (req.qLength === 3) {\r\n      const result = await Cars.getCarsByStatusAndPriceRange(rQuery.min_price, rQuery.max_price);\r\n      res.status(200).send({\r\n        status: 200,\r\n        data: result.rows,\r\n      });\r\n    }\r\n  }\r\n\r\n  async deleteCar(req, res) {\r\n    const { car_id } = req.params;\r\n    await Cars.deleteAdvert(car_id);\r\n    res.status(200).send({\r\n      status: 200,\r\n      data: 'Car Ad successfully deleted',\r\n    });\r\n  }\r\n}\r\n\r\nexport default new CarsController();\r\n"],"file":"CarsController.js"}
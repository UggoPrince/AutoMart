{"version":3,"sources":["../../../server/controllers/OrdersController.js"],"names":["OrdersController","req","res","reqBody","body","Orders","makeOrder","result","rows","price_offered","amount","status","send","data","order_id","params","updatePrice","id","car_id","old_price_offered","old_amount","new_price_offered","rQuery","query","getOrderByBuyer","buyer"],"mappings":";;;;;;;AAGA;;;;;;;;;;;;;;IAEMA,gB;;;;;;;;;;;;+CACoBC,G,EAAKC,G;;;;;;AACrBC,gBAAAA,O,GAAUF,GAAG,CAACG,I;;uBACCC,mBAAOC,SAAP,CAAiBH,OAAjB,C;;;AAAfI,gBAAAA,M;AACNA,gBAAAA,MAAM,CAACC,IAAP,CAAY,CAAZ,EAAeC,aAAf,GAA+BF,MAAM,CAACC,IAAP,CAAY,CAAZ,EAAeE,MAA9C;AACA,uBAAOH,MAAM,CAACC,IAAP,CAAY,CAAZ,EAAeE,MAAtB;AACAR,gBAAAA,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,kBAAAA,MAAM,EAAE,GADW;AAEnBE,kBAAAA,IAAI,EAAEN,MAAM,CAACC,IAAP,CAAY,CAAZ;AAFa,iBAArB;;;;;;;;;;;;;;;;;;;;;gDAMqBP,G,EAAKC,G;;;;;;;AACpBC,gBAAAA,O,GAAUF,GAAG,CAACG,I;AACpBD,gBAAAA,OAAO,CAACW,QAAR,GAAmBb,GAAG,CAACc,MAAJ,CAAWD,QAA9B;;uBACqBT,mBAAOW,WAAP,CAAmBb,OAAnB,C;;;AAAfI,gBAAAA,M;gCAGFA,MAAM,CAACC,IAAP,CAAY,CAAZ,C,EADFS,E,iBAAAA,E,EAAIC,M,iBAAAA,M,EAAQP,M,iBAAAA,M,EAAQD,M,iBAAAA,M;AAEtBH,gBAAAA,MAAM,CAACC,IAAP,CAAY,CAAZ,IAAiB;AACfS,kBAAAA,EAAE,EAAFA,EADe;AACXC,kBAAAA,MAAM,EAANA,MADW;AACHP,kBAAAA,MAAM,EAANA,MADG;AACKQ,kBAAAA,iBAAiB,EAAEhB,OAAO,CAACiB,UADhC;AAC4CC,kBAAAA,iBAAiB,EAAEX;AAD/D,iBAAjB;AAGAR,gBAAAA,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,kBAAAA,MAAM,EAAE,GADW;AAEnBE,kBAAAA,IAAI,EAAEN,MAAM,CAACC,IAAP,CAAY,CAAZ;AAFa,iBAArB;;;;;;;;;;;;;;;;;;;;;gDAMcP,G,EAAKC,G;;;;;;AACboB,gBAAAA,M,GAASrB,GAAG,CAACsB,K;;uBACElB,mBAAOmB,eAAP,CAAuBF,MAAM,CAACG,KAA9B,C;;;AAAflB,gBAAAA,M;AACNL,gBAAAA,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,kBAAAA,MAAM,EAAE,GADW;AAEnBE,kBAAAA,IAAI,EAAEN,MAAM,CAACC;AAFM,iBAArB;;;;;;;;;;;;;;;;;;;;;eAOW,IAAIR,gBAAJ,E","sourcesContent":["/* eslint-disable linebreak-style */\r\n/* eslint-disable class-methods-use-this */\r\n/* eslint-disable camelcase */\r\nimport Orders from '../models/Orders';\r\n\r\nclass OrdersController {\r\n  async makePurchaseOrder(req, res) {\r\n    const reqBody = req.body;\r\n    const result = await Orders.makeOrder(reqBody);\r\n    result.rows[0].price_offered = result.rows[0].amount;\r\n    delete result.rows[0].amount;\r\n    res.status(201).send({\r\n      status: 201,\r\n      data: result.rows[0],\r\n    });\r\n  }\r\n\r\n  async updateOrderPrice(req, res) {\r\n    const reqBody = req.body;\r\n    reqBody.order_id = req.params.order_id;\r\n    const result = await Orders.updatePrice(reqBody);\r\n    const {\r\n      id, car_id, status, amount,\r\n    } = result.rows[0];\r\n    result.rows[0] = {\r\n      id, car_id, status, old_price_offered: reqBody.old_amount, new_price_offered: amount,\r\n    };\r\n    res.status(200).send({\r\n      status: 200,\r\n      data: result.rows[0],\r\n    });\r\n  }\r\n\r\n  async getOrders(req, res) {\r\n    const rQuery = req.query;\r\n    const result = await Orders.getOrderByBuyer(rQuery.buyer);\r\n    res.status(200).send({\r\n      status: 200,\r\n      data: result.rows,\r\n    });\r\n  }\r\n}\r\n\r\nexport default new OrdersController();\r\n"],"file":"OrdersController.js"}
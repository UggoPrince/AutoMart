{"version":3,"sources":["../../../server/models/Orders.js"],"names":["db","Database","Orders","orderData","queryString","buyer","car_id","amount","query","result","rows","price","id","Cars","getCarById","car","order_id"],"mappings":";;;;;;;AAEA;;AACA;;;;;;;;;;;;;;AAEA,IAAMA,EAAE,GAAG,IAAIC,oBAAJ,EAAX;;IACMC,M;;;;;;;;;;;;+CACYC,S;;;;;;AACRC,gBAAAA,W,gFAEOD,SAAS,CAACE,K,iBAAYF,SAAS,CAACG,M,iBAAaH,SAAS,CAACI,M;;uBAE/CP,EAAE,CAACQ,KAAH,CAASJ,WAAT,C;;;AAAfK,gBAAAA,M;AACNA,gBAAAA,MAAM,CAACC,IAAP,CAAY,CAAZ,EAAeC,KAAf,GAAuBR,SAAS,CAACQ,KAAjC;iDACOF,M;;;;;;;;;;;;;;;;;;;;;gDAGWG,E;;;;;;;uBACAC,iBAAKC,UAAL,CAAgBF,EAAhB,C;;;AAAZG,gBAAAA,G;kDACCA,G;;;;;;;;;;;;;;;;;;;;;gDAGUH,E;;;;;;AACXR,gBAAAA,W,8CAAkDQ,E;;uBACnCZ,EAAE,CAACQ,KAAH,CAASJ,WAAT,C;;;AAAfK,gBAAAA,M;kDACCA,M;;;;;;;;;;;;;;;;;;;;;gDAGSN,S;;;;;;AACVC,gBAAAA,W,+CACwBD,SAAS,CAACI,M,gCAC1BJ,SAAS,CAACa,Q;;uBAEHhB,EAAE,CAACQ,KAAH,CAASJ,WAAT,C;;;AAAfK,gBAAAA,M;kDACCA,M;;;;;;;;;;;;;;;;;;;;;eAGI,IAAIP,MAAJ,E","sourcesContent":["/* eslint-disable linebreak-style */\r\n/* eslint-disable class-methods-use-this */\r\nimport Database from '../database/Database';\r\nimport Cars from './Cars';\r\n\r\nconst db = new Database();\r\nclass Orders {\r\n  async makeOrder(orderData) {\r\n    const queryString = `\r\n      INSERT INTO orders (buyer, car_id, amount)\r\n      VALUES ('${orderData.buyer}', '${orderData.car_id}', '${orderData.amount}')\r\n      RETURNING id, car_id, created_on, status, amount;`;\r\n    const result = await db.query(queryString);\r\n    result.rows[0].price = orderData.price;\r\n    return result;\r\n  }\r\n\r\n  async getOrderedCar(id) {\r\n    const car = await Cars.getCarById(id);\r\n    return car;\r\n  }\r\n\r\n  async getOrderById(id) {\r\n    const queryString = `SELECT * FROM orders WHERE id = '${id}';`;\r\n    const result = await db.query(queryString);\r\n    return result;\r\n  }\r\n\r\n  async updatePrice(orderData) {\r\n    const queryString = `\r\n    UPDATE orders SET amount = '${orderData.amount}'\r\n    WHERE id = '${orderData.order_id}' AND status = 'pending'\r\n    RETURNING id, car_id, status, amount;`;\r\n    const result = await db.query(queryString);\r\n    return result;\r\n  }\r\n}\r\nexport default new Orders();\r\n"],"file":"Orders.js"}
{"version":3,"sources":["../../../server/middlewares/FlagsMiddleware.js"],"names":["validateReportAdvert","req","res","next","body","carId","reason","description","result","Validator","validateReportAdvertFields","error","status","send","Response","FlagChecker","checkFlaggedCar"],"mappings":";;;;;;;AACA;;AACA;;;;;;;;AAEA,IAAMA,oBAAoB;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAG,iBAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,wBACYF,GAAG,CAACG,IADhB,EACnBC,KADmB,aACnBA,KADmB,EACZC,MADY,aACZA,MADY,EACJC,WADI,aACJA,WADI;AAErBC,YAAAA,MAFqB,GAEZC,yBAAUC,0BAAV,CAAqCL,KAArC,EAA4CC,MAA5C,EAAoDC,WAApD,CAFY;;AAAA,iBAGvBC,MAAM,CAACG,KAHgB;AAAA;AAAA;AAAA;;AAIzBT,YAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,cAAAA,MAAM,EAAE,GADW;AAEnBD,cAAAA,KAAK,EAAEF,yBAAUK,QAAV;AAFY,aAArB;AAJyB;AAAA;;AAAA;AAAA;AAAA,mBAQTC,wBAAYC,eAAZ,CAA4BX,KAA5B,CARS;;AAAA;AAAA;AAAA;AAAA;AAAA;;AASzBH,YAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,cAAAA,MAAM,EAAE,GADW;AAEnBD,cAAAA,KAAK,yBAAkBN,KAAlB;AAFc,aAArB;AATyB;AAAA;;AAAA;AAczBF,YAAAA,IAAI;;AAdqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAApBH,oBAAoB;AAAA;AAAA;AAAA,GAA1B;;eAkBeA,oB","sourcesContent":["/* eslint-disable linebreak-style */\r\nimport Validator from './validators/ValidateFlag';\r\nimport FlagChecker from './database_checkers/FlagChecker';\r\n\r\nconst validateReportAdvert = async (req, res, next) => {\r\n  const { carId, reason, description } = req.body;\r\n  const result = Validator.validateReportAdvertFields(carId, reason, description);\r\n  if (result.error) {\r\n    res.status(400).send({\r\n      status: 400,\r\n      error: Validator.Response(),\r\n    });\r\n  } else if (!await FlagChecker.checkFlaggedCar(carId)) {\r\n    res.status(404).send({\r\n      status: 404,\r\n      error: `Car with id (${carId}) does not exist.`,\r\n    });\r\n  } else {\r\n    next();\r\n  }\r\n};\r\n\r\nexport default validateReportAdvert;\r\n"],"file":"FlagsMiddleware.js"}
{"version":3,"sources":["../../../server/middlewares/FlagsMiddleware.js"],"names":["FlagsMiddleware","req","res","next","body","car_id","reason","description","result","Validator","validateReportAdvertFields","error","status","send","Response","FlagChecker","checkFlaggedCar"],"mappings":";;;;;;;AAEA;;AACA;;;;;;;;;;;;;;IAEMA,e;;;;;;;;;;;;+CACuBC,G,EAAKC,G,EAAKC,I;;;;;;;4BACKF,GAAG,CAACG,I,EAApCC,M,aAAAA,M,EAAQC,M,aAAAA,M,EAAQC,W,aAAAA,W;AAClBC,gBAAAA,M,GAASC,yBAAUC,0BAAV,CAAqCL,MAArC,EAA6CC,MAA7C,EAAqDC,WAArD,C;;qBACXC,MAAM,CAACG,K;;;;;AACTT,gBAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,kBAAAA,MAAM,EAAE,GADW;AAEnBD,kBAAAA,KAAK,EAAEF,yBAAUK,QAAV;AAFY,iBAArB;;;;;;uBAIgBC,wBAAYC,eAAZ,CAA4BX,MAA5B,C;;;;;;;;AAChBH,gBAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,kBAAAA,MAAM,EAAE,GADW;AAEnBD,kBAAAA,KAAK,yBAAkBN,MAAlB;AAFc,iBAArB;;;;;AAKAF,gBAAAA,IAAI;;;;;;;;;;;;;;;;;;;;;eAKK,IAAIH,eAAJ,E","sourcesContent":["/* eslint-disable camelcase */\n/* eslint-disable class-methods-use-this */\nimport Validator from './validators/ValidateFlag';\nimport FlagChecker from './database_checkers/FlagChecker';\n\nclass FlagsMiddleware {\n  async validateReportAdvert(req, res, next) {\n    const { car_id, reason, description } = req.body;\n    const result = Validator.validateReportAdvertFields(car_id, reason, description);\n    if (result.error) {\n      res.status(400).send({\n        status: 400,\n        error: Validator.Response(),\n      });\n    } else if (!await FlagChecker.checkFlaggedCar(car_id)) {\n      res.status(404).send({\n        status: 404,\n        error: `Car with id (${car_id}) does not exist.`,\n      });\n    } else {\n      next();\n    }\n  }\n}\n\nexport default new FlagsMiddleware();\n"],"file":"FlagsMiddleware.js"}
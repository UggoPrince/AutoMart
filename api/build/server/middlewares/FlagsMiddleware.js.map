{"version":3,"sources":["../../../server/middlewares/FlagsMiddleware.js"],"names":["validateReportAdvert","req","res","next","body","car_id","reason","description","result","Validator","validateReportAdvertFields","error","status","send","Response","FlagChecker","checkFlaggedCar"],"mappings":";;;;;;;AAEA;;AACA;;;;;;;;AAEA,IAAMA,oBAAoB;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAG,iBAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,wBACaF,GAAG,CAACG,IADjB,EACnBC,MADmB,aACnBA,MADmB,EACXC,MADW,aACXA,MADW,EACHC,WADG,aACHA,WADG;AAErBC,YAAAA,MAFqB,GAEZC,yBAAUC,0BAAV,CAAqCL,MAArC,EAA6CC,MAA7C,EAAqDC,WAArD,CAFY;;AAAA,iBAGvBC,MAAM,CAACG,KAHgB;AAAA;AAAA;AAAA;;AAIzBT,YAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,cAAAA,MAAM,EAAE,GADW;AAEnBD,cAAAA,KAAK,EAAEF,yBAAUK,QAAV;AAFY,aAArB;AAJyB;AAAA;;AAAA;AAAA;AAAA,mBAQTC,wBAAYC,eAAZ,CAA4BX,MAA5B,CARS;;AAAA;AAAA;AAAA;AAAA;AAAA;;AASzBH,YAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,cAAAA,MAAM,EAAE,GADW;AAEnBD,cAAAA,KAAK,yBAAkBN,MAAlB;AAFc,aAArB;AATyB;AAAA;;AAAA;AAczBF,YAAAA,IAAI;;AAdqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAApBH,oBAAoB;AAAA;AAAA;AAAA,GAA1B;;eAkBeA,oB","sourcesContent":["/* eslint-disable linebreak-style */\r\n/* eslint-disable camelcase */\r\nimport Validator from './validators/ValidateFlag';\r\nimport FlagChecker from './database_checkers/FlagChecker';\r\n\r\nconst validateReportAdvert = async (req, res, next) => {\r\n  const { car_id, reason, description } = req.body;\r\n  const result = Validator.validateReportAdvertFields(car_id, reason, description);\r\n  if (result.error) {\r\n    res.status(400).send({\r\n      status: 400,\r\n      error: Validator.Response(),\r\n    });\r\n  } else if (!await FlagChecker.checkFlaggedCar(car_id)) {\r\n    res.status(404).send({\r\n      status: 404,\r\n      error: `Car with id (${car_id}) does not exist.`,\r\n    });\r\n  } else {\r\n    next();\r\n  }\r\n};\r\n\r\nexport default validateReportAdvert;\r\n"],"file":"FlagsMiddleware.js"}
{"version":3,"sources":["../../../../server/middlewares/validators/ValidateCar.js"],"names":["ValidateCar","state","status","price","title","manufacturer","model","body_type","photo","refresh","isValidState","isValidStatus","isValidPrice","isValidTitle","isValidManufacturer","isValidModel","isValidBodyType","isValidPhoto","getErrorMessage","car_id","validateInt","isValidStatusUpdate","isValidStatusQuery","min_price","max_price","validateString","user_id","field","isEmptyString","integrateError","str","toLowerCase","validateFloat","regExp","Validator","test","car_photo","empty","query"],"mappings":"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","sourcesContent":["/* eslint-disable camelcase */\nimport Validator from './Validator';\n\nclass ValidateCar extends Validator {\n  static validateCreateAdvertFields( // validates the fields that would creat an advert\n    state, status, price, title, manufacturer, model, body_type, photo,\n  ) {\n    ValidateCar.refresh();\n    ValidateCar.isValidState(state, 'state'); // validate state\n    ValidateCar.isValidStatus(status, 'status'); // validate status\n    ValidateCar.isValidPrice(price, 'price'); // validate price\n    ValidateCar.isValidTitle(title, 'title'); // validate title\n    ValidateCar.isValidManufacturer(manufacturer, 'manufacturer'); // validate manufacturer\n    ValidateCar.isValidModel(model, 'model'); // validate model\n    ValidateCar.isValidBodyType(body_type, 'body_type'); // validate body_type\n    ValidateCar.isValidPhoto(photo, 'image'); // validate photo\n    return ValidateCar.getErrorMessage();\n  }\n\n  // validates the field and url parameter sent to update a car status\n  static validateUpdateCarStatusFields(car_id, status) {\n    ValidateCar.refresh();\n    ValidateCar.validateInt(car_id, 'car_id');\n    ValidateCar.isValidStatusUpdate(status, 'status');\n    return ValidateCar.getErrorMessage();\n  }\n\n  // validates the field and url parameter that updates a car price\n  static validatUpdateCarPriceFields(car_id, price) {\n    ValidateCar.refresh();\n    ValidateCar.validateInt(car_id, 'car_id'); // validate car id\n    ValidateCar.isValidPrice(price, 'price'); // validate the new price\n    return ValidateCar.getErrorMessage();\n  }\n\n  // validate the url parameter for car id sent to retrieve a car\n  static validateViewSpecficCarParams(car_id) {\n    ValidateCar.refresh();\n    ValidateCar.validateInt(car_id, 'car_id');\n    return ValidateCar.getErrorMessage();\n  }\n\n  // validate the query string sent for status\n  static validateViewUnsoldCarsQuery(status) {\n    ValidateCar.refresh();\n    ValidateCar.isValidStatusQuery(status, 'status');\n    return ValidateCar.getErrorMessage();\n  }\n\n  // validate the query string for getting cars in a certain price range\n  static validateViewUnsoldCarsInPriceRange(status, min_price, max_price) {\n    ValidateCar.refresh();\n    ValidateCar.isValidStatusQuery(status, 'status');\n    ValidateCar.isValidPrice(min_price, 'min_price');\n    ValidateCar.isValidPrice(max_price, 'max_price');\n    return ValidateCar.getErrorMessage();\n  }\n\n  // validate the url parameter for car id sent to delete a car\n  static validateDeleteACarParams(car_id) {\n    ValidateCar.refresh();\n    ValidateCar.validateInt(car_id, 'car_id');\n    return ValidateCar.getErrorMessage();\n  }\n\n  // validate the query string for getting cars that are used\n  static validateViewUnsoldNewCars(status, state) {\n    ValidateCar.refresh();\n    ValidateCar.isValidStatusQuery(status, 'status');\n    ValidateCar.isValidState(state, 'state');\n    return ValidateCar.getErrorMessage();\n  }\n\n  static validateViewUnsoldCarsByManufacturer(status, manufacturer) {\n    ValidateCar.refresh();\n    ValidateCar.isValidStatusQuery(status, 'status');\n    ValidateCar.validateString(manufacturer, 'manufacturer');\n    return ValidateCar.getErrorMessage();\n  }\n\n  // validate getting all cars of a user\n  static validateViewAllCarsOfOwner(user_id) {\n    ValidateCar.refresh();\n    ValidateCar.validateInt(user_id, 'onwer id');\n    return ValidateCar.getErrorMessage();\n  }\n\n  static isValidState(state, field) {\n    if (ValidateCar.isEmptyString(state)) {\n      ValidateCar.integrateError(field, `No ${field} entered.`);\n    } else {\n      const str = state.toLowerCase();\n      if (str !== 'new' && str !== 'used') {\n        ValidateCar.integrateError(field, `Invalid ${field}. Must be [ new ] or [ used ].`);\n      }\n    }\n  }\n\n  static isValidStatus(status, field) {\n    if (ValidateCar.isEmptyString(status)) {\n      ValidateCar.integrateError(field, `No ${field} entered.`);\n    } else {\n      const str = status.toLowerCase();\n      if (str !== 'available') {\n        ValidateCar.integrateError(field, `Invalid ${field}. Must be [ available ].`);\n      }\n    }\n  }\n\n  static isValidStatusUpdate(status, field) {\n    if (ValidateCar.isEmptyString(status)) {\n      ValidateCar.integrateError(field, `No ${field} entered.`);\n    } else {\n      const str = status.toLowerCase();\n      if (str !== 'sold') { ValidateCar.integrateError(field, `No ${field} entered.`); }\n    }\n  }\n\n  static isValidPrice(price, field) {\n    ValidateCar.validateFloat(price, field);\n  }\n\n  static isValidTitle(title, field) {\n    const regExp = /^[\\w -]+[^_]$/;\n    if (!Validator.isEmptyString(title) && !regExp.test(title)) {\n      Validator.integrateError(field, `Invalid ${field}.`);\n    }\n  }\n\n  static isValidManufacturer(manufacturer, field) {\n    ValidateCar.validateString(manufacturer, field);\n  }\n\n  static isValidModel(model, field) {\n    ValidateCar.validateString(model, field);\n  }\n\n  static isValidBodyType(body_type, field) {\n    if (ValidateCar.isEmptyString(body_type)) {\n      ValidateCar.integrateError(field, `No ${field} entered.`);\n    }\n  }\n\n  static isValidPhoto(car_photo, str) {\n    // console.log(myPhoto.photo.length === undefined);\n    if (car_photo.empty) {\n      ValidateCar.integrateError(str, `No ${str} submited.`);\n    } /* else if (car_photo.image_url.type !== 'image/jpeg'\n    && car_photo.image_url.type !== 'image/png') {\n      ValidateCar.integrateError(str, `You didn't submit an ${str} type. jpg/png is accepted.`);\n    } */\n  }\n\n  static isValidStatusQuery(status, query) {\n    if (status !== 'available') {\n      ValidateCar.integrateError(query, `The ${query} query string must be [ ?status=available ].`);\n    }\n  }\n}\n\nexport default ValidateCar;\n"],"file":"ValidateCar.js"}